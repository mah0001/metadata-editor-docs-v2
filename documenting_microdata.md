# Documenting microdata

## Defining microdata ##

When surveys or censuses are conducted, when administrative data are recorded, information is collected on each unit of observation. The unit of observation can be a person, a household, a firm, an agricultural holding, a facility, or other. **Microdata** are the data files resulting from these data collection activities, which contain the unit-level information (as opposed to aggregated data in the form of counts, means, or other). Information on each unit is stored in variables, which can be of different types (e.g. numeric or alphanumeric, discrete or continuous). These variables may contain data reported by the respondent (e.g., the marital status of a person), obtained by observation or measurement (e.g., the GPS location of a dwelling), or generated by calculation, recoding or derivation (e.g., the sample weight in a survey).

For efficiency reasons, variables are often stored in numeric format (i.e. coded values), even when they contain qualitative information (coded values). For example, the sex of a respondent may be stored in a variable named ‘Q_01’, and include values 1, 2 and 9 where 1 represents “male”, 2 represents “female”, and 9 represents “unreported”. Microdata must therefore be provided at a minimum with a data dictionary containing the variables and value labels and, for derived variables, information of the derivation process. But many other features of a micro-dataset should also be described such as the objectives and the methodology of data collection (including a description of the sampling design for sample surveys), the period of data collection, the identification of the primary investigator and other contributors, the scope and geographic coverage of the data, and much more. This information will make the data usable and discoverable.

## Metadata standards

### DDI Codebook for documenting the dataset

The Data Documentation Initiative (DDI) metadata standard provides a structured and comprehensive list of hundreds of elements and attributes which may be used to document microdata. It is unlikely that any one study would ever require using them all, but this list provides a convenient solution to foster completeness of the information, and to generate documentation that will meet the needs of users.

The Data Documentation Initiative (DDI) metadata standard originated in the Inter-university Consortium for Political and Social Research (ICPSR), a membership-based organization with more than 500 member colleges and universities worldwide. The DDI is now the project of an alliance of North American and European institutions. Member institutions comprise many of the largest data producers and data archives in the world. The DDI standard is used by a large community of data archivists, including data librarians from academia, data managers in national statistical agencies and other official data producing agencies, and international organizations. The standard has two branches: the DDI-Codebook (version 2.x) and the DDI LifeCycle (version 3.x). These two branches serve different purposes and audiences. For the purpose of data archiving and cataloguing, the schema we recommend in this Guide is the DDI-Codebook. We use a slightly simplified version of version 2.5 of the standard, to which we add a few elements.

The DDI Alliance developed the DDI-Codebook for organizing the content, presentation, transfer, and preservation of metadata in the social and behavioral sciences. It enables documenting microdata files in a simultaneously flexible and rigorous way. The DDI-Codebook aims to provide a straightforward means of recording and communicating all the salient characteristics of a micro-dataset.

The DDI-Codebook is designed to encompass the kinds of data resulting from surveys, censuses, administrative records, experiments, direct observation and other systematic methodology for generating empirical measurements. The unit of observation can be individual persons, households, families, business establishments, transactions, countries or other subjects of scientific interest.

The DDI Alliance publishes the DDI-Codebook as an XML schema. We present in this Guide a JSON implementation of the schema, which is used in our R package NADAR and Python Library PyNADA. The NADA cataloguing application works with both the XML and the JSON version. A DDI-compliant metadata file can be converted from the JSON schema to the XML or from XML to JSON.

The DDI standard is published under the terms of the [GNU General Public License]((http://www.gnu.org/licenses) (version 3 or later).

## Dublin Core for documenting external resources


## Before you start

Before you start documenting a dataset, it is highly recommended to prepare the data and the related materials.

- **Prepare your data files**
   - ***Variable and value labels***: Ensure that all variables and values are labeled (if the data are stored in Stata, SPSS, or another application that loows documentation of variables)
   - ***Direct identifiers***:Drop the direct identifiers from the dataset (names, phone number of respondents, addresses, social security numbers, etc) if you plan to share the data. 
   - ***Unique identifiers and relationships***: Check that each observation in each data file has one or a combination of variables that provide a unique identifier for each observation. Ensure that there are no duplicated identifiers of observations. If your dataset is composed of multiple related data files, check that the files can be merged without any issue. For example, if you have data files at the household and individual levels, make sure all households have at least one corresponding individual, and that each individual belongs to one and only one household.
   - ***Missing values***: Use system missing values (instead of values like '999') for indicating missing values. 
   - ***Work variables***: Drop all temporary or working variables that do not need to be part of the data.  
   - ***Weighting***: Include the sampling weight variables in all files where they make sense. 
   - ***File names***: Name your data (and other) files using names that make them easy to understand.

  - **Prepare the related materials to be included as external resources**
     - Make sure you have a copy of the questionnaire or form in electronic format. Include the original format and a PDF version of it. If the survey was conducted using computer-assisted interviews, using a software like Survey Solutions or CsPro, generate a PDF copy of the electronic form (Survey Solutions provide an otion to generate such a file).
     - Collect an electronic copy of all other relevant documents, such as interviewer manual, technical documentation on sampling, survey technical and analytical report, presentation of results, press releases, etc. If the document is not in PDF format, generate a PDF copy.
     - Collect other digital materials related to the dataset, such as data editing scripts, photos and videos, etc.

## Create a project

The first step in documenting a dataset is to create a new project. You do that by clicking on CREATE NEW PROJECT in the *My projects* page. This will open a new, utitled project page. 

In that page, select the Template you want to use to document the dataset. A default template is proposed. You can switch to another template by clicking on *Switch template* in the **Templates** frame of the *Project home page*. Note that you can at any time change the template used for the documentation of a project. The selected template will determine what you see in the navigation tree and in the metadata entry pages, but switching from one template to another does not impact the metadata that has already been entered. No information will be deleted from the metadata.

See the **Quick start: Microdata** section for a quick overview of the rocess of documenting a micro-dataset.

## Document the dataset

Once a project has been created, you can start entering metadata and subsequently import the data files (assuming you want to include file and variable-level documentation, which is not mandatory), or you can first import the data then add metadata. The sequence in which you document the dataset does not matter. 

The DDI Codebook metadata standard used to document microdata has the following sections, which will be found in any template designed based on that standard:
- **Document description:** This section contains metadata on the metadata (who documents the dataset, when, etc.)
- **Study description:** This section contains cataloguing and referential metadata that describe the study (survey, census, administrative recording system), with information like title, geographic and temporal coverage, producers and sponsors, etc.
- **File description:** This section provides a brief description of each data file.
- **Variable description:** The section contains the metadata elements used to document each variable, with elements like variable name and label, value labels, literal questions and interviwer instructions, universe, summary statistics, and more.
- **Variable groups:** This optional section provides a way to organize variables into groups other than the data files, This section is intended to increase the convenience to users, and possibly the online discoverability of data (if useful group descriptions are provided).

  Add
  - External resources
  - Administrative metadata
  - Provenance

Project must have some information in Study description. Not required to have file and variable level metadata. If you have that, structural metadata. If you publish data, must have that.

### Document description

Metadata about the metadata. Corresponds to "Information on metadata" in other standards.
Highly recommended.

### Study description

Cataloguing and referential metadata. Standard requires at least an ID and title.
Maximize content.

### Importing data files

Click IMPORT, select files. 
Import and convert to CSV internally. 

- Python in background (Pandas)
- Format supported: ...
- Generate summary stats (unweighted)
- Imports metadata: variable names, variable labels, value labels
- Guess variable types
- Data on server ! Can be removed. Needed if weighting or change statistics. Can see size, delete.

![image](https://github.com/mah0001/metadata-editor-docs-v2/blob/main/img/ME_UG_v1-0-0_documenting_microdata_list_data_files.png)

**Reordering data files**


**Exporting data files**

**Deleting data files**
Remove them from the project. All related metadata will be removed.

**Removing data files from server**
Clear data. Keep all metadata, but do not store data on server. Cannot refresh statistics anymore.

**Replacing data files**
![image](https://github.com/mah0001/metadata-editor-docs-v2/blob/main/img/ME_UG_v1-0-0_documenting_microdata_refresh_replace_data_files.png)

**Refreshing summary statistics**


### File description

### View data

View, not edit. Can export. Formats: SPSS, Stata, CSV, JSON, SAS.

![image](https://github.com/mah0001/metadata-editor-docs-v2/blob/main/img/ME_UG_v1-0-0_documenting_microdata_variable_view_data.png)


### Variable description

Detailed data dictionary. Some metadata imported from data files. But can add a lot. Very useful for discoverability and usability.  

- **Variable list**

Variable name, variable label, icons showing the status. 
    ![image](https://github.com/mah0001/metadata-editor-docs-v2/blob/main/img/ME_UG_v1-0-0_documenting_microdata_variable_list_frame.png)
    
Can edit variable label. Should all have one, all variables should have a different label.

**Toolbar**:
   - ***Refresh stats***
   
   - ***Change case***
     
     ![image](https://github.com/mah0001/metadata-editor-docs-v2/blob/main/img/ME_UG_v1-0-0_documenting_microdata_variable_change_case.png)

   - ***Spread metadata***
   
   - ***Delete selection***

**Status Icons**
   - Numeric [1]
   - Character [A]
   - Has categories (tooltip will tell you how many)
   - Weighted
   - Needs refreshing statistics
     
Tip: block selection

- **Variable documentation**

  ![image](https://github.com/mah0001/metadata-editor-docs-v2/blob/main/img/ME_UG_v1-0-0_documenting_microdata_variable_documentation_frame.png)

   ***Toolbar***
     - > < >> <<

   ***Settings***

   ***Statistics***

  ![image](https://github.com/mah0001/metadata-editor-docs-v2/blob/main/img/ME_UG_v1-0-0_documenting_microdata_variable_statistics.png)

   ***Weights***

  ![image](https://github.com/mah0001/metadata-editor-docs-v2/blob/main/img/ME_UG_v1-0-0_documenting_microdata_variable_documentation_weights.png)

   ***Documentation***

   ![image](https://github.com/mah0001/metadata-editor-docs-v2/blob/main/img/ME_UG_v1-0-0_documenting_microdata_variable_documentation_documentation.png)

   ***JSON***

  ![image](https://github.com/mah0001/metadata-editor-docs-v2/blob/main/img/ME_UG_v1-0-0_documenting_microdata_variable_documentation_json.png)


- **Variable categories** (value labels)
  
  When the data are imported, if they are detected as being categorical variables, the *Variable categories* will be automatically populated. If value labels are included in the data file, they will be imported. These labels can be edited in the *Variable categories* frame. Codes can also be added if necessary.
  If the categories were not detected when the data were imported, the Metadata Editor provides an option to automatically *Create categories*. This option is accessed by clicking on the icon at the top of the frame. When this icon is clicked, the application will extract a list of all codes found for the variables in the data, and create a list of categories. The labels corresponding to each category can then be added by the data curator. An icon is also provided to *Clear all* categories in the list.

![image](https://github.com/mah0001/metadata-editor-docs-v2/blob/main/img/ME_UG_v1-0-0_documenting_microdata_value_labels.png)

Categories can be removed from the list by clicking on the trash icon.

An option is also provided to copy/paste content in the list of value labels. This allows for example to copy code lists from an application like MS-Excel and to paste them in the *Variable categories* grid. The pasted information can either *replace* existing content of the grid (if any), or *append* content to it.  

![image](https://github.com/mah0001/metadata-editor-docs-v2/blob/main/img/ME_UG_v1-0-0_documenting_microdata_value_labels_copy_paste_access.png)

![image](https://github.com/mah0001/metadata-editor-docs-v2/blob/main/img/ME_UG_v1-0-0_documenting_microdata_value_labels_copy_paste_menu.png)

- **Variabe information**

![image](https://github.com/mah0001/metadata-editor-docs-v2/blob/main/img/ME_UG_v1-0-0_documenting_microdata_variable_information.png)

   - ***Is weight***

    ![image](https://github.com/mah0001/metadata-editor-docs-v2/blob/main/img/ME_UG_v1-0-0_documenting_microdata_weights.png)

   - ***Interval type***
     Continuous or discrete

   - ***Type***
     Numeric, character, fixed

   - ***Min, Max, and Decimal point***
     
   - ***Missing***
  
- Import metadata from existing file (use case: DDI from Survey Solutions; similar survey)
- Apply default

### Variable groupings

Purpose
How to

![image](https://github.com/mah0001/metadata-editor-docs-v2/blob/main/img/ME_UG_v1-0-0_documenting_microdata_variable_groups_create.png)

![image](https://github.com/mah0001/metadata-editor-docs-v2/blob/main/img/ME_UG_v1-0-0_documenting_microdata_variable_groups_select_item.png)

![image](https://github.com/mah0001/metadata-editor-docs-v2/blob/main/img/ME_UG_v1-0-0_documenting_microdata_variable_groups_selection.png)

### Provenance ###


### External resources
- Recommendations
- How to add
- Specific case of microdata
- Format for microdata

### Importing metadata ###

![image](https://github.com/mah0001/metadata-editor-docs-v2/blob/main/img/ME_UG_v1-0-0_documenting_microdata_import_metadata_menu_access.png)

![image](https://github.com/mah0001/metadata-editor-docs-v2/blob/main/img/ME_UG_v1-0-0_documenting_microdata_import_metadata_menu.png)

![image](https://github.com/mah0001/metadata-editor-docs-v2/blob/main/img/ME_UG_v1-0-0_documenting_microdata_variable_import_project_metadata.png)


### Spreading metadata ###

![image](https://github.com/mah0001/metadata-editor-docs-v2/blob/main/img/ME_UG_v1-0-0_documenting_microdata_spread_metadata_icon.png)

![image](https://github.com/mah0001/metadata-editor-docs-v2/blob/main/img/ME_UG_v1-0-0_documenting_microdata_variable_spread_metadata.png)

### Diagnostic


### Export metadata


### Publish metadata ###



